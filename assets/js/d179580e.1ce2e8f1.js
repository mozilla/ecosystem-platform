"use strict";(self.webpackChunkfirefox_ecosystem_platform=self.webpackChunkfirefox_ecosystem_platform||[]).push([[3204],{60653:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>a});var o=n(74848),t=n(28453);const i={title:"Mobile Specifics"},s=void 0,l={id:"reference/mobile-specifics",title:"Mobile Specifics",description:"Firefox for iOS",source:"@site/docs/reference/mobile-specifics.md",sourceDirName:"reference",slug:"/reference/mobile-specifics",permalink:"/ecosystem-platform/reference/mobile-specifics",draft:!1,unlisted:!1,editUrl:"https://github.com/mozilla/ecosystem-platform/edit/master/docs/reference/mobile-specifics.md",tags:[],version:"current",frontMatter:{title:"Mobile Specifics"},sidebar:"docs",previous:{title:"Metrics",permalink:"/ecosystem-platform/reference/metrics"},next:{title:"NPM / NX Guidelines",permalink:"/ecosystem-platform/reference/npm-scripts-and-nx"}},c={},a=[{value:"Firefox for iOS",id:"firefox-for-ios",level:3},{value:"Android debugging",id:"android-debugging",level:3},{value:"Emulator setup",id:"emulator-setup",level:4},{value:"Pointing to the Custom Mozilla Account server",id:"pointing-to-the-custom-mozilla-account-server",level:4},{value:"Forwarding local server ports",id:"forwarding-local-server-ports",level:4}];function d(e){const r={a:"a",admonition:"admonition",code:"code",em:"em",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.h3,{id:"firefox-for-ios",children:"Firefox for iOS"}),"\n",(0,o.jsx)(r.admonition,{type:"tip",children:(0,o.jsx)(r.p,{children:"Skip this if you are not working on Firefox for iOS and FxA."})}),"\n",(0,o.jsxs)(r.p,{children:["You can test sync locally in Firefox iOS using the XCode simulator.\n",(0,o.jsxs)(r.a,{href:"https://github.com/mozilla-mobile/firefox-ios",children:["Follow the steps at github.com/mozilla/firefox-ios and setup ",(0,o.jsx)(r.em,{children:"firefox-ios"})," "]})," build locally."]}),"\n",(0,o.jsx)(r.p,{children:"To change which FxA servers to use, in XCode simulator while in a signed-out state:"}),"\n",(0,o.jsxs)(r.ol,{children:["\n",(0,o.jsx)(r.li,{children:'Go into Firefox browser settings and tap 5 consecutive times on the version (e.g. "Firefox 133.0"), which will open a "Debug" section'}),"\n",(0,o.jsxs)(r.li,{children:['Look under the "Account" section and tap "Advanced Sync Settings"',"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:'For stage testing, toggle "Use stage servers"'}),"\n",(0,o.jsxs)(r.li,{children:['For local testing, toggle "Use Custom FxA Content Server" and set "Custom Account Content Server URI" to ',(0,o.jsx)(r.code,{children:"http://localhost:3030"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(r.h3,{id:"android-debugging",children:"Android debugging"}),"\n",(0,o.jsx)(r.h4,{id:"emulator-setup",children:"Emulator setup"}),"\n",(0,o.jsx)(r.p,{children:"The Android emulator is most accessible through the Android Studio IDE, and confusingly, we do not need to build an app project in order to use only the emulator with a released version of Firefox for Android."}),"\n",(0,o.jsxs)(r.ol,{children:["\n",(0,o.jsxs)(r.li,{children:["Install Android Studio from ",(0,o.jsx)(r.a,{href:"https://developer.android.com/studio",children:"the website"}),"."]}),"\n",(0,o.jsxs)(r.li,{children:["In the Welcome dialog, click More Actions > Virtual Device Manager and follow the prompts to setup an emulator.","\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"Any Hardware Profile will work."}),"\n",(0,o.jsx)(r.li,{children:'Select an image with a higher API version. Avoid using the "named" pre-release versions.'}),"\n",(0,o.jsx)(r.li,{children:"Ensure you select an image that is compatible with your system. e.g. if you have an Apple Silicon MacBook, then choose the arm64-v8a images only."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(r.li,{children:["Download a recent version of Firefox for Android from ",(0,o.jsx)(r.a,{href:"https://archive.mozilla.org",children:"archive.mozilla.org"}),".","\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:["Nightly: ",(0,o.jsx)(r.a,{href:"https://archive.mozilla.org/pub/fenix/nightly/",children:"https://archive.mozilla.org/pub/fenix/nightly/"})]}),"\n",(0,o.jsxs)(r.li,{children:["Release variants: ",(0,o.jsx)(r.a,{href:"https://archive.mozilla.org/pub/fenix/releases/",children:"https://archive.mozilla.org/pub/fenix/releases/"})]}),"\n",(0,o.jsx)(r.li,{children:"When you find the version that you want to install, choose the same CPU architecture that you selected for your emulator."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(r.li,{children:"Once your emulator has started up, drag-and-drop the APK file on the emulator to install it."}),"\n",(0,o.jsx)(r.li,{children:"Open and verify everything is working as expected."}),"\n"]}),"\n",(0,o.jsx)(r.h4,{id:"pointing-to-the-custom-mozilla-account-server",children:"Pointing to the Custom Mozilla Account server"}),"\n",(0,o.jsxs)(r.p,{children:["To communicate with an Android device, we need to install the Android platform command-line tools first (namely ",(0,o.jsx)(r.code,{children:"adb"}),")."]}),"\n",(0,o.jsx)(r.p,{children:"You can download these in multiple ways:"}),"\n",(0,o.jsxs)(r.ol,{children:["\n",(0,o.jsxs)(r.li,{children:["(Preferred) Install them from your OS package manager. For example, on Mac OS using HomeBrew: ",(0,o.jsx)(r.code,{children:"brew install --cask android-platform-tools"})]}),"\n",(0,o.jsxs)(r.li,{children:["Download the binaries directly from the developer site and (optionally) add them to your ",(0,o.jsx)(r.code,{children:"PATH"}),": ",(0,o.jsx)(r.a,{href:"https://developer.android.com/tools/releases/platform-tools",children:"https://developer.android.com/tools/releases/platform-tools"})]}),"\n",(0,o.jsx)(r.li,{children:"Install Android Studio and locate the binaries within the built-in Android SDK."}),"\n"]}),"\n",(0,o.jsxs)(r.p,{children:["In addition, for Firefox for Android, follow ",(0,o.jsx)(r.a,{href:"https://support.mozilla.org/en-US/kb/how-set-firefox-sync-firefox-android",children:"the instructions on support.mozilla.org"})," to make the application use your local server by setting the Custom Mozilla Account and/or Sync server fields."]}),"\n",(0,o.jsx)(r.admonition,{type:"tip",children:(0,o.jsxs)(r.p,{children:["\u26a0\ufe0f Ensure you enter a fully-qualified URL that includes the ",(0,o.jsx)(r.code,{children:"http://"})," scheme. e.g. ",(0,o.jsx)(r.code,{children:"http://localhost:3030"})]})}),"\n",(0,o.jsx)(r.h4,{id:"forwarding-local-server-ports",children:"Forwarding local server ports"}),"\n",(0,o.jsx)(r.p,{children:"The following technique works with any Android application and can also be used for Firefox for Android."}),"\n",(0,o.jsx)(r.p,{children:"Simply forward the following ports from the host machine to the Android device:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-shell",children:"npm run adb-reverse\n"})}),"\n",(0,o.jsx)(r.p,{children:"or"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-shell",children:"adb reverse tcp:3306  tcp:3306  # MySQL server\nadb reverse tcp:6379  tcp:6379  # redis\nadb reverse tcp:4100  tcp:4100  # Fake SQS/SNS\nadb reverse tcp:8085  tcp:8085  # google-pubsub-emulator\nadb reverse tcp:9090  tcp:9090  # google-firestore-emulator\nadb reverse tcp:5000  tcp:5000  # sync server\nadb reverse tcp:8001  tcp:8001  # cirrus (experimenter)\nadb reverse tcp:8000  tcp:8000  # auth-server db mysql\nadb reverse tcp:9000  tcp:9000  # auth-server key server\nadb reverse tcp:3030  tcp:3030  # content-server\nadb reverse tcp:1111  tcp:1111  # profile-server\nadb reverse tcp:9292  tcp:9292  # Fortress\nadb reverse tcp:8080  tcp:8080  # 123done\nadb reverse tcp:10139 tcp:10139 # 321done\nadb reverse tcp:5050  tcp:5050  # browserid-verifier\nadb reverse tcp:3031  tcp:3031  # payments server\nadb reverse tcp:7100  tcp:7100  # support admin panel\nadb reverse tcp:8002  tcp:8002  # pushbox\nadb reverse tcp:3000  tcp:3000  # react app\nadb reverse tcp:8290  tcp:8290  # graphql api\n"})}),"\n",(0,o.jsxs)(r.p,{children:["Then run ",(0,o.jsx)(r.code,{children:"yarn start"})," and get to work!"]})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>l});var o=n(96540);const t={},i=o.createContext(t);function s(e){const r=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),o.createElement(i.Provider,{value:r},e.children)}}}]);