<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-reference/rate-limiting" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">Rate limiting | Firefox Ecosystem Platform</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mozilla.github.io/ecosystem-platform/reference/rate-limiting"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Rate limiting | Firefox Ecosystem Platform"><meta data-rh="true" name="description" content="Fastly Next-Gen WAF"><meta data-rh="true" property="og:description" content="Fastly Next-Gen WAF"><link data-rh="true" rel="icon" href="/ecosystem-platform/img/firefox-logo.png"><link data-rh="true" rel="canonical" href="https://mozilla.github.io/ecosystem-platform/reference/rate-limiting"><link data-rh="true" rel="alternate" href="https://mozilla.github.io/ecosystem-platform/reference/rate-limiting" hreflang="en"><link data-rh="true" rel="alternate" href="https://mozilla.github.io/ecosystem-platform/reference/rate-limiting" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://RFM5H13DFK-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Rate limiting","item":"https://mozilla.github.io/ecosystem-platform/reference/rate-limiting"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="Firefox Ecosystem Platform" href="/ecosystem-platform/opensearch.xml"><link rel="stylesheet" href="/ecosystem-platform/assets/css/styles.6b629fdc.css">
<script src="/ecosystem-platform/assets/js/runtime~main.16dde052.js" defer="defer"></script>
<script src="/ecosystem-platform/assets/js/main.641b342b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/ecosystem-platform/img/firefox-logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ecosystem-platform/"><div class="navbar__logo"><img src="/ecosystem-platform/img/firefox-logo.png" alt="Ecosystem Platform Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ecosystem-platform/img/firefox-logo.png" alt="Ecosystem Platform Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Firefox Ecosystem Platform</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/mozilla/ecosystem-platform" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ecosystem-platform/"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link"><span title="For Relying Parties" class="categoryLinkLabel_W154">For Relying Parties</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/relying-parties/tutorials/integration-with-fxa"><span title="Tutorials" class="categoryLinkLabel_W154">Tutorials</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/relying-parties/how-tos/end-to-end-encryption"><span title="How-to Guides" class="categoryLinkLabel_W154">How-to Guides</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/relying-parties/reference/glossary"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--active"><span title="For FxA Engineers" class="categoryLinkLabel_W154">For FxA Engineers</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/tutorials/development-setup"><span title="Tutorials" class="categoryLinkLabel_W154">Tutorials</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/how-tos/ci-guidelines"><span title="How-to Guides" class="categoryLinkLabel_W154">How-to Guides</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/ecosystem-platform/reference/team-processes/development-process"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/reference/team-processes/development-process"><span title="Team Processes" class="categoryLinkLabel_W154">Team Processes</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/reference/style-guides/node-style-guide"><span title="Style Guides" class="categoryLinkLabel_W154">Style Guides</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/reference/tests-in-circleci"><span title="CI and Test Automation" class="categoryLinkLabel_W154">CI and Test Automation</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/application-logging"><span title="Application Logging" class="linkLabel_WmDU">Application Logging</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/application-tracing"><span title="Application Tracing" class="linkLabel_WmDU">Application Tracing</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/browser-support"><span title="Browser Support" class="linkLabel_WmDU">Browser Support</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/canceling-subscriptions-to-plan"><span title="Canceling Subscriptions to Plan" class="linkLabel_WmDU">Canceling Subscriptions to Plan</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/database-structure"><span title="Database Structure" class="linkLabel_WmDU">Database Structure</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/emails"><span title="Emails" class="linkLabel_WmDU">Emails</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/github-strategies"><span title="GitHub Strategies" class="linkLabel_WmDU">GitHub Strategies</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/localization"><span title="Localization" class="linkLabel_WmDU">Localization</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/metrics"><span title="Metrics" class="linkLabel_WmDU">Metrics</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/mobile-specifics"><span title="Mobile Specifics" class="linkLabel_WmDU">Mobile Specifics</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/npm-scripts-and-nx"><span title="NPM / NX Guidelines" class="linkLabel_WmDU">NPM / NX Guidelines</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/oauth-details"><span title="OAuth Details" class="linkLabel_WmDU">OAuth Details</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ecosystem-platform/reference/rate-limiting"><span title="Rate limiting" class="linkLabel_WmDU">Rate limiting</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/storybook-deploys-with-circleci"><span title="Storybook Deploys with CircleCI" class="linkLabel_WmDU">Storybook Deploys with CircleCI</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/system-diagrams"><span title="System Diagrams" class="linkLabel_WmDU">System Diagrams</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/third-party-authentication"><span title="Third Party Authentication" class="linkLabel_WmDU">Third Party Authentication</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/tokens"><span title="Tokens" class="linkLabel_WmDU">Tokens</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/webchannels"><span title="WebChannels" class="linkLabel_WmDU">WebChannels</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/api"><span title="⚙️ API Reference" class="linkLabel_WmDU">⚙️ API Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/gql-api"><span title="⚙️ GQL API Reference" class="linkLabel_WmDU">⚙️ GQL API Reference</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/explanation/architectural-decision-records"><span title="Explanation" class="categoryLinkLabel_W154">Explanation</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/additional-docs"><span title="Additional Docs" class="linkLabel_WmDU">Additional Docs</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link"><span title="For Support Agents" class="categoryLinkLabel_W154">For Support Agents</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/reference/admin-panel"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/ecosystem-platform/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">For FxA Engineers</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Reference</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Rate limiting</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Rate Limiting</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="fastly-next-gen-waf">Fastly Next-Gen WAF<a href="#fastly-next-gen-waf" class="hash-link" aria-label="Direct link to Fastly Next-Gen WAF" title="Direct link to Fastly Next-Gen WAF" translate="no">​</a></h2>
<p>Fastly Next-Gen WAF is the company-wide solution implemented to protect our publicly available web services from web-application and DDoS attacks. The Product Security team provides support for the WAF and maintains <a href="https://mozilla-hub.atlassian.net/wiki/spaces/SECURITY/pages/1655931003/Fastly+WAF+Service+offering" target="_blank" rel="noopener noreferrer">the docs</a>.  FxA&#x27;s responsibility is to configure, fine-tune, and monitor WAF metrics and logs regularly.  The following public FxA endpoints are behind the WAF:</p>
<p>Stage</p>
<ul>
<li>accounts.stage.mozaws.net</li>
<li>api-accounts.stage.mozaws.net</li>
<li>eventbroker.accounts.allizom.org</li>
<li>fxa-graphql-api.stage.mozaws.net</li>
<li>oauth.stage.mozaws.net</li>
<li>payments-next.allizom.org</li>
<li>payments-server.allizom.org</li>
<li>profile.stage.mozaws.net</li>
</ul>
<p>Production</p>
<ul>
<li>profile.accounts.firefox.com</li>
<li>api.accounts.firefox.com</li>
<li>accounts.firefox.com</li>
<li>oauth.accounts.firefox.com</li>
<li>graphql.accounts.firefox.com</li>
<li>eventbroker-prod.fxa.prod.cloudops.mozgcp.net</li>
<li>payments.firefox.com</li>
<li>subscriptions.firefox.com</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="updating-settings-and-custom-rules">Updating settings and custom rules<a href="#updating-settings-and-custom-rules" class="hash-link" aria-label="Direct link to Updating settings and custom rules" title="Direct link to Updating settings and custom rules" translate="no">​</a></h3>
<p>Settings and custom rules have been created and should be updated via Terraform. Find the settings files (<code>fxa/tf/stage/waf.tf</code> and <code>fxa/tf/prod/waf.tf</code>) in the webservices-infra repository. Access to the dashboards for each endpoint are available via SSO (select &quot;Sites&quot; dropdown to choose an endpoint): <a href="https://dashboard.signalsciences.net/corps/mozilla/overview" target="_blank" rel="noopener noreferrer">https://dashboard.signalsciences.net/corps/mozilla/overview</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="blockingunblock-emergencies">Blocking/unblock emergencies<a href="#blockingunblock-emergencies" class="hash-link" aria-label="Direct link to Blocking/unblock emergencies" title="Direct link to Blocking/unblock emergencies" translate="no">​</a></h3>
<p>From the overview dashboard of an endpoint, notice the green pill button at the top-right that reads &quot;Blocking&quot;. In case of emergency, e.g. a false-positive block of a relying party, this can be switched to &quot;Not blocking&quot; to quickly and temporarily unblock all IPs. Preferably, we would instead identify a single IP to unblock under &quot;Monitor &gt; Events&quot; and pressing the &quot;Allow IP&quot; button. Use the GUI to quickly unblock as needed, but if it&#x27;s not an emergency commit changes using Terraform instead.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="customs-v2">Customs V2<a href="#customs-v2" class="hash-link" aria-label="Direct link to Customs V2" title="Direct link to Customs V2" translate="no">​</a></h2>
<p>FxA now uses a rate-limit library that communicates with a dedicated Redis instance to conduct rate-limiting operations. The following is essentially just a rehashed version of the libraries readme file which can be found here. Always check the lib&#x27;s readme for the most up to date doc!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="defining-rules">Defining Rules<a href="#defining-rules" class="hash-link" aria-label="Direct link to Defining Rules" title="Direct link to Defining Rules" translate="no">​</a></h3>
<p>This library is driven by a simple grammar for defining rules. The grammar is as follows:</p>
<p><code> ${action} : ${property} : ${attempts} : ${window} : ${duration} : ${policy}</code></p>
<p>Where a &#x27;section&#x27; is separated by &#x27;:&#x27; and leading and trailing whitespace within a section is trimmed.
Note that comments can be added by starting a line with &#x27;#&#x27;. Adding comments explaining what the rulesets try to achieve is encouraged!</p>
<ul>
<li><code>action</code>   - This is the user action being checked and counted. For example, accountLogin would check when an account login is attempted.</li>
<li><code>property</code> - The property/attribute we are counting for a given action. Options are ip, email, ip_email, uid and ip_uid.</li>
<li><code>attempts</code> - Number of tries until the rule is considered violated and block (or ban) occurs</li>
<li><code>window</code>   - Time span over which actions are counted. Once the window ends, actions are allowed again.</li>
<li><code>duration</code> - How long the block (or ban) remains active. Note that while the block is active, attempts are not counted!</li>
<li><code>policy</code>   - Determines what happens after a rate limit is exceeded. Options are block, ban, or report</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="property-options">Property Options<a href="#property-options" class="hash-link" aria-label="Direct link to Property Options" title="Direct link to Property Options" translate="no">​</a></h3>
<p>Here the valid options that can be provided in the property column, and their significance.</p>
<ul>
<li>ip        - The user&#x27;s IP. This is often useful for &#x27;ban&#x27; policies, where we want to flag an IP that is making a large number of requests.</li>
<li>ip_email  - The user&#x27;s IP with the user&#x27;s email appended. This is useful for ensuring one user cannot impact another user&#x27;s experience.</li>
<li>email     - The user&#x27;s email. This is useful only when the account isn&#x27;t known and for some reason, we don&#x27;t want to use ip_email.</li>
<li>uid       - The user&#x27;s account id. This can be useful for stopping a user that has logged in from doing something malicious, like trying to mine data.</li>
<li>ip_uid    - The user&#x27;s account id with the user&#x27;s uid appended. This is useful for ensuring one user cannot impact another user&#x27;s experience.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="policy-options">Policy Options<a href="#policy-options" class="hash-link" aria-label="Direct link to Policy Options" title="Direct link to Policy Options" translate="no">​</a></h3>
<p>The block on policy describes what happens when a rate limit is exceeded. Or in other words when a given block on property is has seen more than the
the allotted max attempts.</p>
<ul>
<li>block  - The action+property for the rule is no longer permitted until the duration expires or the user provides an unblock code on sign in and clears the block.</li>
<li>ban    - Any and all rules for the given property are no longer permitted until the duration expires. Bans cannot be cleared by end users! So be very careful defining bans.</li>
<li>report - The rule for the given action and property is only reported on, i.e. we emit metrics that can be monitored, but we do not actually block the action/property.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-default-rule">The &#x27;default&#x27; Rule<a href="#the-default-rule" class="hash-link" aria-label="Direct link to The &#x27;default&#x27; Rule" title="Direct link to The &#x27;default&#x27; Rule" translate="no">​</a></h3>
<p>To avoid lots of repetitive configuration, we have one special rule known as the &#x27;default&#x27; rule. This rule
is used as a fallback in the event an action is supplied to the rate limiter, but it cannot be found in the
set of configured rules. When the &#x27;default&#x27; rule is used, the action count is still kept distinct per action,
but the policy from the default rule is used.</p>
<p>For example, if we were to call</p>
<p><code>rateLimit.check(&#x27;foo&#x27;, { ip:0.0.0.0})</code></p>
<p>And our rules file looked like this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">default : ip       : 100 : 10 minutes : 10 minutes : block</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">bar     : ip_email : 5   : 10 minutes : 10 minutes : block</span><br></span></code></pre></div></div>
<p>Then we&#x27;d increment the redis count for action foo blocking on ip, but we&#x27;d use the default rule&#x27;s settings to
determine the rate limit. So the redis state would like this after calling check:</p>
<p><code>rate-limit:attempts:ip=0.0.0.0:foo:100-600-600 =&gt; 1</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="testing--development-considerations">Testing &amp; Development Considerations<a href="#testing--development-considerations" class="hash-link" aria-label="Direct link to Testing &amp; Development Considerations" title="Direct link to Testing &amp; Development Considerations" translate="no">​</a></h3>
<p>When developing new features, running functional test suites locally, or running smoke tests remotely, rate-limiting behavior can be annoying — or even downright disruptive. To work around this, there are a few options:</p>
<ul>
<li>You override ride them via an environment variable, RATE_LIMIT__RULES=&quot;&quot; <em>(Preferred option, since it works across the board.)</em></li>
<li>You use dev.json and override the config.</li>
<li>You can set the maxAttempt to be all be very high (or vary low if you want to test blocking scenarios quickly). <em>(Not great, you might accidently commit your changes.)</em></li>
<li>You can simply delete the contents of the rules in rate-limit-rules.txt. <em>(Not preferred cause you might accidently commit the change!)</em></li>
</ul>
<p>_ Note, you could also just add your IP to the RATE_LIMIT__IGNORE_IPS filter as mentioned below. Same options above apply here as to where / how you set this filter._</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="exclude-specific-attributes-like-ip-email-or-uid">Exclude specific attributes like ip, email, or UID<a href="#exclude-specific-attributes-like-ip-email-or-uid" class="hash-link" aria-label="Direct link to Exclude specific attributes like ip, email, or UID" title="Direct link to Exclude specific attributes like ip, email, or UID" translate="no">​</a></h4>
<p>When running smoke tests against a remote server, the first approach may not work — so we also support excluding specific emails or IP addresses from being checked by the rate limiter. To do this, define these values in your server&#x27;s config file and pass them to the rate limiter.</p>
<ul>
<li>Email ignore values can use regex filters.</li>
<li>IP addresses and UIDs must be exact string matches.</li>
</ul>
<p><em>Note that when using the email filter, checks run on IP only may still be susceptible to getting blocked! For this reason the IP filter might be a better approach if you can use static IPs.</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="auth-server-specifics">Auth Server specifics<a href="#auth-server-specifics" class="hash-link" aria-label="Direct link to Auth Server specifics" title="Direct link to Auth Server specifics" translate="no">​</a></h3>
<p>The auth server has a special config for auto checking all endpoints. To turn this on set <code>RATE_LIMIT__CHECK_ALL_ENDPOINTS=true</code>.</p>
<p>At the time of writing this isn&#x27;t currently enabled, but it might be in the future. And if it is, a couple things to note:</p>
<ul>
<li>When this is enabled, we should define the &#x27;default&#x27; rule! Otherwise calls will fall back to the legacy customs service, and this could result in a spike of blocked requests.</li>
<li>It&#x27;s also important to note that individual endpoints can be configured with the following pattern, <code>${HTTP_METHOD}_${PATH}</code> where path is lower case and non alpha numeric characters are converted to underscores.</li>
<li>Some endpoints like <code>/v1/verify</code> have very high traffic, so specific rules should be added for these endpoints. For example <code>post__v1_verify : 100 : ip : 1 minute : 1 minute : report</code> would be a safe rule to add if turning on check all end points.</li>
<li>Alternatively we might even consider skipping high traffic endpoints from rate-limiting checks. To do this add the high traffic endpoint to the <code>RATE_LIMIT__SKIP_ENDPOINTS</code> config setting.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="graphql-specifics">Graphql Specifics<a href="#graphql-specifics" class="hash-link" aria-label="Direct link to Graphql Specifics" title="Direct link to Graphql Specifics" translate="no">​</a></h3>
<p>Graphql also has the ability to run custom checks on on various actions. To do this simply decorate the endpoint to protect with <code>@UseGuards(GqlCustomsGuard(&#x27;updateDisplayName&#x27;))</code>, where updateDisplayName is the action you wan to rate limit.</p>
<p>Same as auth-server, you can define default rules in the rate-limit-rules.txt file, or via the RATE_LIMIT__RULES env.</p>
<p><em>At the time of writing, there is no way to check all graphql endpoints automatically...</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-blocking-scenarios">New Blocking Scenarios<a href="#new-blocking-scenarios" class="hash-link" aria-label="Direct link to New Blocking Scenarios" title="Direct link to New Blocking Scenarios" translate="no">​</a></h3>
<p>We have begun to collect blocking scenarios as a team in an attempt to strategize around how to provide rules that protect our end users, but also aren&#x27;t overly aggressive or annoying. If you are interested in these scnearios, or are considering adding a new one, please reach out to an FxA team member or look for the blocking scenarios in our internal docs for more info on how we approach setting up robust rate limiting rules.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-is-it-different-from-v1">How is it different from V1?<a href="#how-is-it-different-from-v1" class="hash-link" aria-label="Direct link to How is it different from V1?" title="Direct link to How is it different from V1?" translate="no">​</a></h3>
<p>The new version no longer uses a ‘service’. It talks directly to redis via the <code>libs/accounts/rate-limit</code> library. This library serves as the abstraction for configuring and enforcing rate limit policies.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-the-rewrite">Why the rewrite?<a href="#why-the-rewrite" class="hash-link" aria-label="Direct link to Why the rewrite?" title="Direct link to Why the rewrite?" translate="no">​</a></h3>
<p>There’s several reasons.</p>
<ul>
<li>It’s smaller. The service had 3426 lines of codes, and the new library had 960 lines.</li>
<li>It’s config driven. The customs configuration is now easy to read and understand. There’s no more second guessing what customs is doing, just check the config. There’s also no need to edit code to add a rule, just update the config.</li>
<li>It’s more efficient and more direct. We skip a whole round of http web requests and json serialization. The new lib talks directly to redis.</li>
<li>It allows for more grain tuning of rules. We can now distinguish between blocking and banning, and we can do this on ip, email, uid, ip+email, or ip+uid. The old service would inevitably block on ip or email and bugs like this would happen.</li>
<li>It can be configured independently per service. Previously the custom’s service had a config that was specific to the services that used it. This is a prime example of feature envy. The old customs service was effectively concerned with aspects of the services it was being called from. This relationship is backward. In the new approach the library has no configuration defined. And has no knowledge of the calling code. The requirements for configuration have been shifted to calling code where they belong.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="great-can-i-just-turn-it-off-its-annoying-while-developing">Great, can I just turn it off? It’s annoying while developing…<a href="#great-can-i-just-turn-it-off-its-annoying-while-developing" class="hash-link" aria-label="Direct link to Great, can I just turn it off? It’s annoying while developing…" title="Direct link to Great, can I just turn it off? It’s annoying while developing…" translate="no">​</a></h3>
<p>Yes, this is very easy. Simply set the rateLimit.rules to an empty string, and voila it’s off. Any of the following work for this:</p>
<ul>
<li>Set <code>RATE_LIMIT__RULES=””</code> in your .env file or .bashrc</li>
<li>Override the config setting in dev.json as you would any other config in fxa.</li>
<li>Delete the contents of rate-limit-rules.txt that customs reads from by default.</li>
</ul>
<p>Please note, we’d like you to develop with customs on! Ignoring customs is like ignoring an important piece of functionality in the code base.</p>
<p>We currently have plenty of examples where customs errors are not handled correctly. This probably stems from people developing with customs off. A better approach is to alter the ‘max attempts’ in the rate-limit-rules.txt files as needed. You could increase max attempts value to make customs less active, or decrease the max attempts value to make customs more active and make it easier to test blocking behavior.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="whats-the-difference-between-a-block-a-ban-and-report-policy-again">What’s the difference between a block, a ban, and report policy again?<a href="#whats-the-difference-between-a-block-a-ban-and-report-policy-again" class="hash-link" aria-label="Direct link to What’s the difference between a block, a ban, and report policy again?" title="Direct link to What’s the difference between a block, a ban, and report policy again?" translate="no">​</a></h3>
<p>Blocks only apply to the current rule. You can think of a block as blocking an isolated action once the max attempts are hit.</p>
<p>Bans apply to the current rule, and all other rules. If a user trips a ban, then they are effectively blocked from that action, and all other actions, hence the term ‘ban’.</p>
<p>Report is the final policy option for . It allows you to record metrics, but not actually do a block. This is great for testing out hypotheticals with little risk. But, be careful not to clobber other existing rules when you use this!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="whats-up-with-the-default-rule-again">What’s up with the ‘default’ rule again?<a href="#whats-up-with-the-default-rule-again" class="hash-link" aria-label="Direct link to What’s up with the ‘default’ rule again?" title="Direct link to What’s up with the ‘default’ rule again?" translate="no">​</a></h3>
<p>The default rule is a special case. When configured, it will act as the fallback in the event a rule isn’t found. For example, let’s say you have a call like this: <code>rateLimit.check(‘foo’, {ip});</code> If there is no rule for action foo in the current rate limit rules config, then if and only if there’s a default rule defined, we will use that.</p>
<p>Be sure to set defaults for ALL blocks on policies. Otherwise, you might get an error.</p>
<p>Be very careful with the default. It should have plenty of overhead!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="im-adding-a-new-rule-but-im-concerned-about-the-impact-can-i-monitor-this">I’m adding a new rule but I’m concerned about the impact, can I monitor this?<a href="#im-adding-a-new-rule-but-im-concerned-about-the-impact-can-i-monitor-this" class="hash-link" aria-label="Direct link to I’m adding a new rule but I’m concerned about the impact, can I monitor this?" title="Direct link to I’m adding a new rule but I’m concerned about the impact, can I monitor this?" translate="no">​</a></h3>
<p>Yep! We got graphs over in yardstick. If you can&#x27;t find them reach out to a teammate.</p>
<p>A couple things to note about these graphs. We have some that are specific to auth-server. These metrics look like fxa_auth_server_customs_*. These are legacy metrics and we use these comparisons before and after a rule rolls out.</p>
<p>We also have the metrics emitted by the rate-limit library. These metrics offer further information about what got blocked and why. This graph provides a lot of detail about the exact nature of blocks that are occurring. These are rules targeting <code>${SERVICE_NAME}_rate_limit_*</code>. These will be referenced in dashboards titled ‘Rate Limit Library - $VIEW`.</p>
<p>As noted above, when rolling out a new rule, it’s often a good idea to roll it out initially with the ‘report’ policy, so no blocks occur at first. This can give a baseline for whether or not blocks seem reasonable. Once you feel good with blocking, i.e. we don’t see a sky high number of blocks, you can change the ‘report’ policy to a block or ban policy.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="once-a-user-is-blocked-do-they-get-unblocked-how-does-this-work-exactly">Once a user is blocked, do they get unblocked? How does this work exactly?<a href="#once-a-user-is-blocked-do-they-get-unblocked-how-does-this-work-exactly" class="hash-link" aria-label="Direct link to Once a user is blocked, do they get unblocked? How does this work exactly?" title="Direct link to Once a user is blocked, do they get unblocked? How does this work exactly?" translate="no">​</a></h3>
<p>Yes, a user can become unblocked if they provide an unblock code at sign in. If the code is valid, all blocks will be cleared for the users’s current IP, email, uid, ip+email, and ip+uid that proved the sign in code correct… Checkout how the <code>/account/login/send_unblock_code</code> is invoked, and how the <code>RateLimit::unblock</code> method is called for exact details.</p>
<p>It’s important to note that ‘bans’ WILL NOT BE CLEARED. Which is why we should be very careful with ban operations and only apply them in cases where the behavior is clearly malicious like incorrect attempts at passwords or codes.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-user-is-having-trouble-with-being-blocked-can-i-help-them">A user is having trouble with being blocked. Can I help them?<a href="#a-user-is-having-trouble-with-being-blocked-can-i-help-them" class="hash-link" aria-label="Direct link to A user is having trouble with being blocked. Can I help them?" title="Direct link to A user is having trouble with being blocked. Can I help them?" translate="no">​</a></h3>
<p>This is a work in progress, but sometime soon, you sure can go to admin panel, and navigate to the rate limit section. You will have 3 OR filters at the top for ip, email, and uid. If you enter any of these, any active block or ban will be displayed below. Assuming you have admin privileges, you can clear these blocks and bans.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/mozilla/ecosystem-platform/edit/master/docs/reference/rate-limiting.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/ecosystem-platform/reference/oauth-details"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">OAuth Details</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ecosystem-platform/reference/storybook-deploys-with-circleci"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Storybook Deploys with CircleCI</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#fastly-next-gen-waf" class="table-of-contents__link toc-highlight">Fastly Next-Gen WAF</a><ul><li><a href="#updating-settings-and-custom-rules" class="table-of-contents__link toc-highlight">Updating settings and custom rules</a></li><li><a href="#blockingunblock-emergencies" class="table-of-contents__link toc-highlight">Blocking/unblock emergencies</a></li></ul></li><li><a href="#customs-v2" class="table-of-contents__link toc-highlight">Customs V2</a><ul><li><a href="#defining-rules" class="table-of-contents__link toc-highlight">Defining Rules</a></li><li><a href="#property-options" class="table-of-contents__link toc-highlight">Property Options</a></li><li><a href="#policy-options" class="table-of-contents__link toc-highlight">Policy Options</a></li><li><a href="#the-default-rule" class="table-of-contents__link toc-highlight">The &#39;default&#39; Rule</a></li><li><a href="#testing--development-considerations" class="table-of-contents__link toc-highlight">Testing &amp; Development Considerations</a></li><li><a href="#auth-server-specifics" class="table-of-contents__link toc-highlight">Auth Server specifics</a></li><li><a href="#graphql-specifics" class="table-of-contents__link toc-highlight">Graphql Specifics</a></li><li><a href="#new-blocking-scenarios" class="table-of-contents__link toc-highlight">New Blocking Scenarios</a></li></ul></li><li><a href="#faq" class="table-of-contents__link toc-highlight">FAQ</a><ul><li><a href="#how-is-it-different-from-v1" class="table-of-contents__link toc-highlight">How is it different from V1?</a></li><li><a href="#why-the-rewrite" class="table-of-contents__link toc-highlight">Why the rewrite?</a></li><li><a href="#great-can-i-just-turn-it-off-its-annoying-while-developing" class="table-of-contents__link toc-highlight">Great, can I just turn it off? It’s annoying while developing…</a></li><li><a href="#whats-the-difference-between-a-block-a-ban-and-report-policy-again" class="table-of-contents__link toc-highlight">What’s the difference between a block, a ban, and report policy again?</a></li><li><a href="#whats-up-with-the-default-rule-again" class="table-of-contents__link toc-highlight">What’s up with the ‘default’ rule again?</a></li><li><a href="#im-adding-a-new-rule-but-im-concerned-about-the-impact-can-i-monitor-this" class="table-of-contents__link toc-highlight">I’m adding a new rule but I’m concerned about the impact, can I monitor this?</a></li><li><a href="#once-a-user-is-blocked-do-they-get-unblocked-how-does-this-work-exactly" class="table-of-contents__link toc-highlight">Once a user is blocked, do they get unblocked? How does this work exactly?</a></li><li><a href="#a-user-is-having-trouble-with-being-blocked-can-i-help-them" class="table-of-contents__link toc-highlight">A user is having trouble with being blocked. Can I help them?</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Mozilla Corporation.</div></div></div></footer></div>
</body>
</html>