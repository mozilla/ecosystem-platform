<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-reference/localization" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Localization | Firefox Ecosystem Platform</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mozilla.github.io/ecosystem-platform/reference/localization"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Localization | Firefox Ecosystem Platform"><meta data-rh="true" name="description" content="Current as of November 6, 2023"><meta data-rh="true" property="og:description" content="Current as of November 6, 2023"><link data-rh="true" rel="icon" href="/ecosystem-platform/img/firefox-logo.png"><link data-rh="true" rel="canonical" href="https://mozilla.github.io/ecosystem-platform/reference/localization"><link data-rh="true" rel="alternate" href="https://mozilla.github.io/ecosystem-platform/reference/localization" hreflang="en"><link data-rh="true" rel="alternate" href="https://mozilla.github.io/ecosystem-platform/reference/localization" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://RFM5H13DFK-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Firefox Ecosystem Platform" href="/ecosystem-platform/opensearch.xml"><link rel="stylesheet" href="/ecosystem-platform/assets/css/styles.b0ab5bf8.css">
<script src="/ecosystem-platform/assets/js/runtime~main.d069a5bd.js" defer="defer"></script>
<script src="/ecosystem-platform/assets/js/main.9ada747a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/ecosystem-platform/img/firefox-logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ecosystem-platform/"><div class="navbar__logo"><img src="/ecosystem-platform/img/firefox-logo.png" alt="Ecosystem Platform Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ecosystem-platform/img/firefox-logo.png" alt="Ecosystem Platform Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Firefox Ecosystem Platform</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mozilla/ecosystem-platform" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ecosystem-platform/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">For Relying Parties</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/relying-parties/tutorials/integration-with-fxa">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/relying-parties/how-tos/end-to-end-encryption">How-to Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/relying-parties/reference/integration-requirements">Reference</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">For FxA Engineers</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/tutorials/development-setup">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/how-tos/ci-guidelines">How-to Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/ecosystem-platform/reference/team-processes/development-process">Reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/reference/team-processes/development-process">Team Processes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/reference/style-guides/node-style-guide">Style Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/reference/tests-in-circleci">CI and Test Automation</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/application-logging">Application Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/application-tracing">Application Tracing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/browser-support">Browser Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/canceling-subscriptions-to-plan">Canceling Subscriptions to Plan</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/customs-api">⚙️ Customs API Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/database-structure">Database Structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/emails">Emails</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/experiments-ab-testing">Experiments &amp; A/B Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/github-strategies">GitHub Strategies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/incident-response">Incident Response</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ecosystem-platform/reference/localization">Localization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/metrics">Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/mobile-specifics">Mobile Specifics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/npm-scripts-and-nx">NPM / NX Guidelines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/oauth-details">OAuth Details</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/rate-limiting">Rate limiting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/storybook-deploys-with-circleci">Storybook Deploys with CircleCI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/system-diagrams">System Diagrams</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/third-party-authentication">Third Party Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/tokens">Tokens</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/reference/webchannels">WebChannels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a href="https://docs.telemetry.mozilla.org/datasets/fxa.html" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex="0">Telemetry Data Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/explanation/architectural-decision-records">Explanation</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ecosystem-platform/additional-docs">Additional Docs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">For Support Agents</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ecosystem-platform/reference/admin-panel">Reference</a></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/ecosystem-platform/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">For FxA Engineers</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Reference</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Localization</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p>Current as of <code>November 6, 2023</code></p>
<p>Translations for Mozilla accounts and Subscription Platform are located in the <a href="https://github.com/mozilla/fxa-content-server-l10n/" target="_blank" rel="noopener noreferrer">fxa-content-server-l10n repo</a>. This includes translations for UI and emails, but does not include <a href="#terms-of-service-and-privacy-policy-are-handled-differently">legal documents</a>.</p>
<header><h1>Process overview</h1></header>
<ol>
<li><a href="#adding-new-strings-for-localization">Adding new strings for localization</a>
<ul>
<li>Use legacy <a href="https://www.gnu.org/software/gettext/" target="_blank" rel="noopener noreferrer">gettext</a> for fxa-content-server</li>
<li>Use <a href="https://projectfluent.org/" target="_blank" rel="noopener noreferrer">Fluent</a> everywhere else</li>
</ul>
</li>
<li><a href="#extraction-process">Extraction</a>: Strings are extracted to the <a href="https://github.com/mozilla/fxa-content-server-l10n/" target="_blank" rel="noopener noreferrer">l10n repo</a></li>
<li><a href="#localization-process">Localization</a>: Strings are localized on <a href="https://pontoon.mozilla.org/" target="_blank" rel="noopener noreferrer">Pontoon</a></li>
<li><a href="#build-process">Build</a>: Localized strings are copied from the l10n repo and bundled with builds</li>
</ol>
<h1>Adding new strings for localization</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="with-gettext">With gettext<a href="#with-gettext" class="hash-link" aria-label="Direct link to With gettext" title="Direct link to With gettext">​</a></h2>
<p>Within fxa-content-server, all localizable strings are wrapped in a <code>t</code> method. <code>t</code> is a signal to the l10n extraction script that the embedded string is meant for translation. Within mustache templates, strings meant for extraction are wrapped in <code>{{#t}}{{/t}}</code> or <code>{{#unsafeTranslate}}{{/unsafeTranslate}}</code> tags.</p>
<p>Strings wrapped in a <code>{{#t}}{{/t}}</code> tag are HTML escaped by default to prevent unexpected HTML from being written to the DOM. HTML can be written to the DOM from a string that is translated using the <code>{{#unsafeTranslate}}{{/unsafeTranslate}}</code> tag. Within an <code>unsafeTranslate</code> tag, named variables must contain the escaped prefix to remind developers that the variable must be HTML escaped before being written.</p>
<p>For example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{{#unsafeTranslate}}Enter the code that was sent to %(escapedEmail)s within 5 minutes.{{/unsafeTranslate}}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When translated by the content-server, <code>escapedEmail</code> will be passed as a variable to the translate function, causing <code>%(escapedEmail)s</code> to be replaced with the passed in value.</p>
<p>Gettext comments can be used to provide extra context to translators to allow them to effectively translate strings that could be vague in different languages. Text preceeded by <code>///</code> is extracted as a gettext comment (<code>#.</code>), while adding <code>msgctxt</code> marks the text as a separate entry for localization even if there are other strings with identical text. For example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/// submit button</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">const buttonSignInText = this.translate(t(&#x27;Sign in&#x27;), {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  msgctxt: &#x27;submit button&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#. submit button</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">msgctxt &quot;submit button&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">msgid &quot;Sign in&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">msgstr &quot;Identificarse&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>See <a href="https://www.gnu.org/software/gettext/manual/html_node/index.html" target="_blank" rel="noopener noreferrer">gettext documentation</a> for more details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="with-fluent">With Fluent<a href="#with-fluent" class="hash-link" aria-label="Direct link to With Fluent" title="Direct link to With Fluent">​</a></h2>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Developers should read the <a href="https://projectfluent.org/fluent/guide/" target="_blank" rel="noopener noreferrer">Fluent syntax guide</a> before adding or modifying Fluent strings. Particular care should be taken when including variables, attributes or embedded elements in localized strings.</p></div></div>
<p>To localize an element with Fluent, the message must be added to an FTL file with a unique identifier. In the <a href="https://github.com/mozilla/fxa" target="_blank" rel="noopener noreferrer">Fxa repo</a>, Fluent strings are kept close to the file where they are used by adding an <code>en.ftl</code> file at the component-level. These files are then concatenated at the package-level with a <code>merge-ftl</code> grunttask. For example, all <code>en.ftl</code> files in fxa-settings are concatenanted into <code>settings.ftl</code> before the strings are extracted to the l10n repo.</p>
<p>A very basic example of an en.ftl file:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Example component</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## This is a group comment that applies to all strings until anoter group comment is added - only use it at the top of the file</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># This is a standalone comments for developers, it won&#x27;t show up on Pontoon</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># The id, file name and project will be shown as context on Pontoon</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">example-component-heading = Page heading example</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># This is a note that applies only to example-subheading</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">example-component-subheading = Page subheading example</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Our convention for naming FTL id:</p>
<ol>
<li>FTL IDs should be all lower-case alphanumeric characters.</li>
<li>Words should be separated with hyphens (kebab case).</li>
<li>IDs should be prefixed with the name of the component/page (e.g., bento-menu-... for BentoMenu component files)</li>
<li>If an existing string is modified, add a version suffix to the string id (e.g., bento-menu-heading-v2).</li>
<li>The id should be descriptive for both the developer and the localizer, as it might be used as context to understand how the string is used.</li>
<li>Prefer whole words vs abbreviations (e.g., &#x27;button&#x27; instead of &#x27;btn&#x27;) as they are clearer for non-native English speakers.</li>
</ol>
<p>React-based packages (<code>fxa-payments</code>, <code>fxa-react</code>, <code>fxa-settings</code>) use <a href="https://github.com/projectfluent/fluent.js/wiki/React-Bindings" target="_blank" rel="noopener noreferrer">React bindings for Project Fluent</a>.</p>
<p>Preferred implementation: use <a href="https://github.com/mozilla/fxa/blob/d4397b040dd83c13344bbecfad04c88507964ad7/packages/fxa-react/lib/utils.tsx#L81" target="_blank" rel="noopener noreferrer">FtlMsg</a> wrapper element and <a href="https://github.com/mozilla/fxa/blob/efe165b98896e503dd13a0c72b46a450990eff13/packages/fxa-settings/src/models/hooks.ts#L185" target="_blank" rel="noopener noreferrer">useFtlMsgResolver</a> hook for new additions, or when updating existing components that directly use the <a href="https://github.com/projectfluent/fluent.js/wiki/Localized" target="_blank" rel="noopener noreferrer">Localized</a> component and <a href="https://github.com/projectfluent/fluent.js/wiki/useLocalization" target="_blank" rel="noopener noreferrer">useLocalization</a> hook. The custom <code>FtlMsg</code> wrapper and <code>useFtlMsgResolver</code> hook provide additional safety by forcing the inclusion of fallback text and preparing for additional l10n testing (see <a href="https://github.com/mozilla/fxa/blob/main/docs/adr/0032-l10n-i18n-improvements.md" target="_blank" rel="noopener noreferrer">L10n/I18n Improvements ADR</a>)</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;FtlMsg id=&quot;example-component-heading&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;h1&gt;Page heading example&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/FtlMsg&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The useFtlMsgResolver can be used to pass a localized string as a prop to a child component or to add a localized string as an element attribute.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">const ftlMsgResolver = useFtlMsgResolver();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">const localizedMessage = ftlMsgResolver.getMsg(&#x27;ftl-id&#x27;,&#x27;Fallback text&#x27;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Branding <a href="https://projectfluent.org/fluent/guide/terms.html" target="_blank" rel="noopener noreferrer">terms</a> (such as Mozilla, Mozilla accounts) can be found in <a href="https://github.com/mozilla/fxa/blob/main/libs/shared/l10n/src/lib/branding.ftl" target="_blank" rel="noopener noreferrer">branding.ftl</a> and are shared by all packages that use Fluent strings. The branding file is bundled with other package-level ftl files at build time into a <code>main.ftl</code> file to ensure the branding terms are made available for use as placeables in other strings.</p>
<p>Fluent strings used in emails are implemented a bit differently because of MJML template constraints. See <a href="/ecosystem-platform/reference/emails#localization-l10n">fxa-auth-server email localization</a> for details.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="modifying-strings">Modifying strings<a href="#modifying-strings" class="hash-link" aria-label="Direct link to Modifying strings" title="Direct link to Modifying strings">​</a></h3>
<p>If a string must be modified, a new string must be created (for example by adding <code>-2</code> or <code>-v2</code> to the previous id). Modifying an existing string won&#x27;t trigger a localization request - the &#x27;en&#x27; string would be updated, but localized strings would all have the old text as the localizers would not be notified of the change. If a string used as a <a href="https://projectfluent.org/fluent/guide/references.html" target="_blank" rel="noopener noreferrer">placeable</a> in other strings is updated, all dependant strings must <em>also</em> be bumped to a new version to include the updated id and will trigger a new localization request.</p>
<p>E.g.,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">unique-id = Some string</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">another-unique-id = { unique-id } is repeated here</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">unique-id-v2 = An updated string</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">another-unique-id-v2 = { unique-id-v2 } is repeated here</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-few-important-notes-about-localization-with-fluentreact">A few important notes about localization with Fluent/React<a href="#a-few-important-notes-about-localization-with-fluentreact" class="hash-link" aria-label="Direct link to A few important notes about localization with Fluent/React" title="Direct link to A few important notes about localization with Fluent/React">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="attributes">Attributes<a href="#attributes" class="hash-link" aria-label="Direct link to Attributes" title="Direct link to Attributes">​</a></h4>
<p>Attributes can be localized declaratively with <code>&lt;Localized&gt;</code> or <code>&lt;FtlMsg&gt;</code> components. See the <a href="https://github.com/projectfluent/fluent.js/wiki/Localized#attributes" target="_blank" rel="noopener noreferrer">Fluent Wiki for examples and notes</a> on the importance of including the <code>attrs</code> prop. If <code>attrs</code> is not passed, no attributes will be set!</p>
<p>An alternative is to use a hook (either <code>useLocalization</code> or <code>useFtlMsgResolver</code>) to pass the localized string as a prop. In this scenario, the FTL id should include the name of the attribute (e.g., component-name-image-alt-text) to provide context for localizers.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="markupembedded-elements-in-strings">Markup/embedded elements in strings<a href="#markupembedded-elements-in-strings" class="hash-link" aria-label="Direct link to Markup/embedded elements in strings" title="Direct link to Markup/embedded elements in strings">​</a></h4>
<p>If the string contains markup (for example, a link), the <code>elems</code> prop MUST be used. See <a href="https://github.com/projectfluent/fluent.js/wiki/Localized#markup" target="_blank" rel="noopener noreferrer">Fluent Wiki for examples and notes</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-styling-to-uppercaselowercase-localized-text">Using styling to uppercase/lowercase localized text<a href="#using-styling-to-uppercaselowercase-localized-text" class="hash-link" aria-label="Direct link to Using styling to uppercase/lowercase localized text" title="Direct link to Using styling to uppercase/lowercase localized text">​</a></h4>
<p>Just don&#x27;t - locales may have different rules around capitalization. Best to apply capitalization to the default &#x27;en&#x27; string with a comment about the context, and let localizers determine what is best for their locale.</p>
<p>See <a href="https://mozilla-l10n.github.io/localizer-documentation/tools/fluent/basic_syntax.html#terms-and-parameterized-terms" target="_blank" rel="noopener noreferrer">notes about paramtrization for brand terms</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="documentation-about-using-fluent">Documentation about using Fluent:<a href="#documentation-about-using-fluent" class="hash-link" aria-label="Direct link to Documentation about using Fluent:" title="Direct link to Documentation about using Fluent:">​</a></h3>
<ul>
<li><a href="https://github.com/projectfluent/fluent/wiki" target="_blank" rel="noopener noreferrer">Project Fluent Wiki</a></li>
<li><a href="https://projectfluent.org/fluent/guide/" target="_blank" rel="noopener noreferrer">Fluent Syntax Guide</a></li>
<li><a href="https://mozilla-l10n.github.io/localizer-documentation/index.html" target="_blank" rel="noopener noreferrer">Documentation for Mozilla Localizers</a></li>
<li><a href="https://firefox-source-docs.mozilla.org/l10n/fluent/index.html" target="_blank" rel="noopener noreferrer">Fluent for Firefox Developers</a></li>
<li><a href="https://bedrock.readthedocs.io/en/latest/l10n.html#fluent" target="_blank" rel="noopener noreferrer">Bedrock Fluent documentation</a></li>
</ul>
<h1>Extraction process</h1>
<p>Timed <a href="https://github.com/mozilla/fxa-content-server-l10n/blob/main/.github/workflows/l10n_extract.yaml" target="_blank" rel="noopener noreferrer">cron job on CircleCI</a> runs twice weekely on Monday and Thursday afternoons. This job can also be run manually if needed (reach out to the Mozilla accounts l10n project manager).</p>
<ul>
<li>Calls <a href="https://github.com/mozilla/fxa/blob/main/_scripts/l10n/clone.sh" target="_blank" rel="noopener noreferrer">clone.sh</a> to clone the l10n repo before extracting strings.</li>
<li>Runs the <code>merge-ftl</code> grunt tasks for required fxa packages.</li>
<li>Calls <a href="https://github.com/mozilla/fxa-content-server-l10n/blob/master/scripts/extract_strings.sh" target="_blank" rel="noopener noreferrer">extract_strings.sh</a> to extract strings from the fxa repo (including running <a href="https://github.com/mozilla/fxa/blob/main/packages/fxa-content-server/grunttasks/l10n-extract.js" target="_blank" rel="noopener noreferrer">l10n-extract</a> for gettext) and create a commit with a random branch name.</li>
<li>Branch becomes a pull request on the <code>fxa-content-server-l10n</code> repository which must be merged after doing cursory checks to ensure new/changed strings “look right”. If l10n notices any issues that weren&#x27;t spotted in the PR review, they will typically let the team know at this point so that a fix can be implemented before manually re-running the export script.</li>
<li>Once merged, <a href="https://pontoon.mozilla.org/projects/mozilla-accounts/" target="_blank" rel="noopener noreferrer">Pontoon automatically pulls in string</a> changes and notifies localizers.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="extraction-process-deep-dive-gettext">Extraction process deep dive (gettext)<a href="#extraction-process-deep-dive-gettext" class="hash-link" aria-label="Direct link to Extraction process deep dive (gettext)" title="Direct link to Extraction process deep dive (gettext)">​</a></h2>
<p>Gettext string extraction on the content server is done with a grunt task called <a href="https://github.com/mozilla/fxa/blob/main/packages/fxa-content-server/grunttasks/l10n-extract.js" target="_blank" rel="noopener noreferrer">l10n-extract</a>. The content server is a mixture of JavaScript, TypeScript, JSX, Handlebars, and Mustache, and each of these file types may contain translatable strings. <a href="https://github.com/mozilla/fxa/blob/d4397b040dd83c13344bbecfad04c88507964ad7/packages/fxa-content-server/grunttasks/l10n-extract.js#L28" target="_blank" rel="noopener noreferrer">jsxextract</a> is used to extract strings from a variety of file types, including JavaScript extensions such as babel-specific dynamic imports and class properties that <code>jsx-gettext</code> does not handle.</p>
<ul>
<li>Use <a href="https://github.com/mozilla/fxa/blob/d4397b040dd83c13344bbecfad04c88507964ad7/packages/fxa-content-server/grunttasks/l10n-extract.js#L22" target="_blank" rel="noopener noreferrer">babel to convert non-standard JavaScript, JSX, and TypeScript into ES5 JavaScript</a>.</li>
<li><code>jsxextract</code> analyses source files looking for the keywords <a href="https://github.com/mozilla/fxa/blob/d4397b040dd83c13344bbecfad04c88507964ad7/packages/fxa-content-server/grunttasks/l10n-extract.js#L54" target="_blank" rel="noopener noreferrer">‘t’, and ‘unsafeTranslate’</a>, saving a list of strings along with source location annotations to <code>client.pot</code> and <code>server.pot</code>.<!-- -->
<ul>
<li>The <code>.pot</code> files contain only the current strings that need to be translated.</li>
</ul>
</li>
<li>For <a href="https://github.com/mozilla/fxa-content-server-l10n/tree/master/locale" target="_blank" rel="noopener noreferrer">each locale in the fxa-content-server-l10n repo</a>, the strings from the .pot files are <a href="https://github.com/mozilla/fxa-content-server-l10n/blob/master/scripts/merge_po.sh" target="_blank" rel="noopener noreferrer">merged with existing strings</a> in <code>.po</code> files.<!-- -->
<ul>
<li>Translations of strings in the <code>.pot</code> file that are already in the existing <code>.po</code> files are kept.</li>
<li>New entries are added for strings in the <code>.pot</code> file that have no entries in the existing <code>.po</code> files.</li>
<li>Any strings in the <code>.po</code> files that no longer have entries in the <code>.pot</code> files are commented out.</li>
</ul>
</li>
</ul>
<p>The translations in <code>.po</code> (Portable Object) files are stored with a relatively simple format. Here is an example:</p>
<div class="language-po codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-po codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#: .es5/views/confirm_reset_password.js:195</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">msgid &quot;Password reset&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">msgstr &quot;Slaptažodžio atkūrimas&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>First line (#: .es5…): location(s) where the string is used in the source code.</li>
<li>Second line (msgid): string in English.</li>
<li>Third line (msgstr): the translation (if available). If no translation is provided, msgstr is an empty string <code>&quot;&quot;</code></li>
</ul>
<h1>Localization process</h1>
<ul>
<li>Localizers are notified that Mozilla accounts strings have changed.</li>
<li>Localizers make updates and a review request is issued.</li>
<li>Reviewer accepts changes.</li>
<li>Changes are pushed back to the <a href="https://github.com/mozilla/fxa-content-server-l10n/" target="_blank" rel="noopener noreferrer">fxa-content-server-l10n</a> repo as a commit to master.<!-- -->
<ul>
<li>Every commit to master causes a <a href="https://github.com/mozilla/grunt-l10n-lint" target="_blank" rel="noopener noreferrer">linting job</a> to be run.<!-- -->
<ul>
<li>The linter checks to ensure:<!-- -->
<ul>
<li>All HTML within the translations is well formed, e.g., no unclosed anchor tags.</li>
<li>No unexpected HTML elements, attributes or values exist.</li>
<li>All named variables in the translations exist in the English strings.</li>
</ul>
</li>
<li>These checks prevent:<!-- -->
<ul>
<li>l10n being used as an attack vector since HTML element attributes can contain JavaScript or external links.</li>
<li>Incorrect page renderings due to malformed HTML in l10n strings.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1>Build process</h1>
<p>The latest strings from <a href="https://github.com/mozilla/fxa/blob/main/packages/fxa-content-server/scripts/download_l10n.sh" target="_blank" rel="noopener noreferrer">fxa-content-server-l10n repo</a> are cloned with each build (see <a href="https://github.com/mozilla/fxa/blob/main/docs/adr/0032-l10n-i18n-improvements.md#decision-outcome-4-clone-fxa-content-server-l10n-once-instead-of-per-package" target="_blank" rel="noopener noreferrer">decision outcome #4 of the the L10n/I18 Improvements ADR</a> for details on this approach). Newly localized strings from Pontoon are not available (on stage/production) until a new release (including a dot release) is created.</p>
<ul>
<li>On prebuild, <a href="https://github.com/mozilla/fxa/blob/main/_scripts/l10n/prime.sh" target="_blank" rel="noopener noreferrer">l10n<!-- -->:prime</a> pulls the latest localization files into target workspaces.</li>
<li>The build process calls a <code>build-l10n</code> task:<!-- -->
<ul>
<li>In fxa-content-server:<!-- -->
<ul>
<li>The <a href="https://github.com/mozilla/fxa/blob/main/packages/fxa-content-server/grunttasks/l10n-create-json.js" target="_blank" rel="noopener noreferrer">l10n-create-json grunt task</a> copies all translated <code>.po</code> files from the fxa-content-server-l10n repo and runs the <a href="https://github.com/rockykitamura/grunt-po2json/" target="_blank" rel="noopener noreferrer">grunt po2json task</a>, once for each of the 2 <code>.po</code> files for each locale, resulting in 2 <code>.json</code> files for each locale.</li>
<li>A copy of the compiled JavaScript bundles is created for each locale.</li>
<li>Static JavaScript resources are deployed to a 3rd party CDN (Amazon) and <a href="https://developer.mozilla.org/docs/Web/Security/Subresource_Integrity" target="_blank" rel="noopener noreferrer">Subresouce Integrity (SRI)</a> is used to ensure the resources are not modified on the CDN. Each JavaScript bundle (per locale) has its own SRI hash.</li>
</ul>
</li>
<li>In other localized packages (fxa-auth-server, fxa-payments, fxa-react, fxa-settings, fxa-shared):<!-- -->
<ul>
<li>Individual source <code>en.ftl</code> files for the default &#x27;en&#x27; locale are merged into a package-level <code>.ftl</code> file (<code>merge-ftl</code> grunt task) to ensure local builds have access to the latest FTL strings.</li>
<li>l10n bundles are created for use by Fluent&#x27;s <code>&lt;LocalizationProvider&gt;</code> with <a href="https://github.com/mozilla/fxa/blob/main/_scripts/l10n/bundle.sh" target="_blank" rel="noopener noreferrer">bundle.sh</a>.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1>Additional notes</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dates-and-times">Dates and Times<a href="#dates-and-times" class="hash-link" aria-label="Direct link to Dates and Times" title="Direct link to Dates and Times">​</a></h2>
<p>Dates and times are a special case because dates and times are very locale specific. For example, in Europe it is common for July 10 to be written <code>10/07</code> whereas that would read October 10th to North Americans. All of our times and dates are translated using the locale-aware version of MomentJS. Since the locale-aware <a href="https://momentjs.com/" target="_blank" rel="noopener noreferrer">MomentJS</a> is rather large (67kb), dates and times displayed in the <a href="https://accounts.firefox.com/settings/clients" target="_blank" rel="noopener noreferrer">Connected services</a> of FxA are translated on the auth-server when requesting the devices and apps list.</p>
<p>Where possible in packages that use Fluent, we should instead use <a href="https://projectfluent.org/fluent/guide/functions.html" target="_blank" rel="noopener noreferrer">Fluent&#x27;s DATETIME function</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="terms-of-service-and-privacy-policy-are-handled-differently">Terms of Service and Privacy Policy are handled differently<a href="#terms-of-service-and-privacy-policy-are-handled-differently" class="hash-link" aria-label="Direct link to Terms of Service and Privacy Policy are handled differently" title="Direct link to Terms of Service and Privacy Policy are handled differently">​</a></h2>
<p>The FxA <a href="https://github.com/mozilla/legal-docs/blob/master/en/firefox_cloud_services_tos.md" target="_blank" rel="noopener noreferrer">Terms of Service</a> and <a href="https://github.com/mozilla/legal-docs/tree/master/firefox_cloud_services_PrivacyNotice" target="_blank" rel="noopener noreferrer">Privacy Policy</a> are handled differently to other FxA translations. The most important difference is that these are considered legally binding documents, as such changes are driven by Mozilla’s legal team and source documents are held in the <a href="https://github.com/mozilla/legal-docs/" target="_blank" rel="noopener noreferrer">mozilla/legal-docs repository</a> on Github. Any time either document is updated, paid specialist legal translators make the updates for other languages.</p>
<p>Unlike the rest of the FxA translations that are held in gettext .po files, the terms of service and privacy policy source documents are full markdown documents to allow the Legal team control over the formatting of the documents. During the FxA docker image build, the head of the legal-docs repo is pulled in and the markdown documents converted to HTML.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="text-direction">Text direction<a href="#text-direction" class="hash-link" aria-label="Direct link to Text direction" title="Direct link to Text direction">​</a></h2>
<p>In fxa-settings and fxa-payments, we use React-Helmet to set the text direction in the Head by comparing the rendered locale with a list of RTL languages. If the negotiated locale is a right-to-left (RTL) language, the page-content will be displayed in RTL layout.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Packages that use Tailwind for styling can use <a href="https://tailwindcss.com/blog/tailwindcss-v3-3#simplified-rtl-support-with-logical-properties" target="_blank" rel="noopener noreferrer">Tailwind&#x27;s logical properties</a> to automatically adjust the layout for LTR/RTL.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/mozilla/ecosystem-platform/edit/master/docs/reference/localization.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/ecosystem-platform/reference/incident-response"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Incident Response</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ecosystem-platform/reference/metrics"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Metrics</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#with-gettext" class="table-of-contents__link toc-highlight">With gettext</a></li><li><a href="#with-fluent" class="table-of-contents__link toc-highlight">With Fluent</a><ul><li><a href="#modifying-strings" class="table-of-contents__link toc-highlight">Modifying strings</a></li><li><a href="#a-few-important-notes-about-localization-with-fluentreact" class="table-of-contents__link toc-highlight">A few important notes about localization with Fluent/React</a></li><li><a href="#documentation-about-using-fluent" class="table-of-contents__link toc-highlight">Documentation about using Fluent:</a></li></ul></li><li><a href="#extraction-process-deep-dive-gettext" class="table-of-contents__link toc-highlight">Extraction process deep dive (gettext)</a></li><li><a href="#dates-and-times" class="table-of-contents__link toc-highlight">Dates and Times</a></li><li><a href="#terms-of-service-and-privacy-policy-are-handled-differently" class="table-of-contents__link toc-highlight">Terms of Service and Privacy Policy are handled differently</a></li><li><a href="#text-direction" class="table-of-contents__link toc-highlight">Text direction</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Mozilla Corporation.</div></div></div></footer></div>
</body>
</html>